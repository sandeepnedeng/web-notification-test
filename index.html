<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Hello</title>
    </head>
    <body>
        <button onclick="subscribe()">
        Subscribe
        </button>

        <script>
            addEventListener('load', async () => {
                console.log("Loaded")
                let sw = await navigator.serviceWorker.register('./sw.js')
                console.log(sw)
            })

            async function subscribe() {
                console.log("Service worker registration ")
                let sw = await navigator.serviceWorker.ready;

                console.log("Service worker Ready")
                let push = await sw.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: 'BFgwcxScV59ZTXIJ05Wo2pOfkoSHYvq0vktx9u2WgNRnrYvIetb4AeXt2m9dYWiuQYLoA17LPI54pcQzHnNACms' 
                })

                console.log(JSON.stringify(push));
            }
        </script>
    </body>
</html>